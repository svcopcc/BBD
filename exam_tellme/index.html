<!DOCTYPE html>
<html lang="zh-TW" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¡Œç›®è§£ç­”æœå°‹</title>
  
    <!-- æ–°ç‰ˆ favicon (SVG) -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    
    <!-- å‚™ç”¨ favicon (PNG/ICO) çµ¦ä¸æ”¯æ´çš„ç€è¦½å™¨ -->
    <link rel="alternate icon" type="image/x-icon" href="/favicon.ico">

    <link rel="stylesheet" href="/styles_bg.css">
  
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .container {
            max-width: 800px;
        }
        /* Custom scrollbar style */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #e5e7eb;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #9ca3af;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }
    </style>
</head>
<body class="bg-FFE8CC flex items-center justify-center min-h-screen p-4">

<div class="container bg-white rounded-3xl shadow-xl p-8 space-y-6">

    <h1 class="text-3xl font-bold text-center text-gray-800">è€ƒè©¦é¡Œç›®è§£ç­”æœå°‹</h1>
    <!-- ç¬¬ 1 æ’ï¼šA + C -->
    <div class="flex flex-col sm:flex-row items-center justify-between gap-2">
      <!-- A -->
      <p class="text-center sm:text-left text-gray-600">
        è«‹å¾ä¸‹æ–¹é¸å–é¡Œåº«ï¼Œä¸¦è¼¸å…¥ã€Œé¡Œç›®ã€é—œéµå­—é€²è¡Œæœå°‹ã€‚
      </p>
      <!-- Cï¼ˆä¿®æ­£ HTML çµæ§‹èˆ‡å¯«æ³•ï¼‰ -->
      <p class="sm:text-right">
        <a href="https://feixu.tw/BBD/"
           class="text-[rgb(255,134,44)] text-[1.2em] hover:underline">
           ğŸ”—ğŸ”—å›é¦–é 
        </a>
      </p>
    </div>
    
    <!-- ç¬¬ 2 æ’ï¼šB + D -->
    <div class="flex flex-col sm:flex-row items-center justify-between gap-2 mb-8">
      <!-- B -->
      <p class="text-center sm:text-left text-gray-600">ç›®å‰åƒ…æ”¯æ´æœå°‹é¡Œç›®ã€‚</p>
      <!-- D -->
      <p class="text-center sm:text-right text-gray-600">å¼µæºåº­ | v. 2025.09.14</p>
    </div>


    <!-- ä¸‹æ‹‰é¸å–® -->
    <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
        <p class="text-center text-gray-600">ğŸš©è«‹é¸æ“‡é¡Œåº«ï¼š</p>
    </div>
    <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
        <select id="topicSelector" class="flex-grow p-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all cursor-pointer">
            <!-- é¸é …å°‡ç”± JavaScript å‹•æ…‹ç”Ÿæˆ -->
        </select>
    </div>

    <!-- æœå°‹æ¡† -->
    <div class="relative flex-grow">
            <input type="text" id="searchInput" placeholder="è¼¸å…¥é—œéµå­—æœå°‹..." class="w-full p-3 pl-10 pr-4 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
            </svg>
    </div>

    <!-- å…¨é¸èˆ‡è²¼ä¸ŠæŒ‰éˆ• -->
    <button id="pasteBtn" class="w-full bg-red-500 text-white font-bold p-3 rounded-xl shadow-lg hover:bg-red-600 transition-all">å…¨é¸èˆ‡è²¼ä¸Š</button>

    <!-- æœå°‹çµæœå€åŸŸ -->
    <div id="resultsContainer" class="max-h-[60vh] overflow-y-auto space-y-6 p-4 bg-gray-50 rounded-2xl border border-gray-200 shadow-inner">
        <p class="text-center bg-blue-500 italic">æ­£åœ¨è¼‰å…¥é¡Œåº«ï¼Œè«‹ç¨å€™...</p>
    </div>

</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const topicSelector = document.getElementById('topicSelector');
        const searchInput = document.getElementById('searchInput');
        const pasteBtn = document.getElementById('pasteBtn');
        const resultsContainer = document.getElementById('resultsContainer');

        //é¡Œï¼Œé€—
        const questionBankUrls = {
            '114å¹´åº¦è³‡å®‰åŠå€‹è³‡ä¿è­·å®£å°': 'https://feixu.tw/BBD/exam_tellme/json/114%E5%B9%B4%E5%BA%A6%E8%B3%87%E5%AE%89%E5%8F%8A%E5%80%8B%E8%B3%87%E4%BF%9D%E8%AD%B7%E5%AE%A3%E5%B0%8E.json',
            'a601-å…¨å€æ™ºè²¡åŸºç¤æ•™è‚²è¨“ç·´æš¨æ™ºè²¡æ”¿ç­–ç›®æ¨™å®£å°': 'https://feixu.tw/BBD/exam_tellme/json/a601-%E5%85%A8%E5%8D%80%E6%99%BA%E8%B2%A1%E5%9F%BA%E7%A4%8E%E6%95%99%E8%82%B2%E8%A8%93%E7%B7%B4%E6%9A%A8%E6%99%BA%E8%B2%A1%E6%94%BF%E7%AD%96%E7%9B%AE%E6%A8%99%E5%AE%A3%E5%B0%8E.json'
        };

        let questionBanks = {};
        let currentData = null;

        // å‹•æ…‹è¼‰å…¥é¸å–®ä¸¦è¼‰å…¥è³‡æ–™
        async function loadQuestionBanks() {
            try {
                topicSelector.innerHTML = '';
                resultsContainer.innerHTML = '<p class="text-center text-gray-500 italic">æ­£åœ¨è¼‰å…¥é¡Œåº«ï¼Œè«‹ç¨å€™...</p>';

                for (const topic in questionBankUrls) {
                    const url = questionBankUrls[topic];
                    const option = document.createElement('option');
                    option.value = topic;
                    option.textContent = topic;
                    topicSelector.appendChild(option);

                    const response = await fetch(url);
                    if (!response.ok) {
                        throw new Error(`HTTP éŒ¯èª¤! ç‹€æ…‹ç¢¼: ${response.status}`);
                    }
                    const data = await response.json();

                    let examData = null;

                    // æª¢æŸ¥ JSON æ ¼å¼æ˜¯å¦åŒ…å« exam é™£åˆ—
                    if (data && Array.isArray(data.exam)) {
                        examData = data.exam;
                    } else if (Array.isArray(data)) {
                        // å¦‚æœæ ¹å°±æ˜¯ä¸€å€‹é™£åˆ—ï¼Œå‰‡ç›´æ¥ä½¿ç”¨
                        examData = data;
                    } else {
                        throw new Error("JSON æª”æ¡ˆæ ¼å¼ä¸ç¬¦ã€‚");
                    }

                    questionBanks[topic] = examData.map(item => {
                        let optionsText = '';
                        if (item.options && typeof item.options === 'object') {
                            for (const key in item.options) {
                                optionsText += `${key}. ${item.options[key]}\n`;
                            }
                        }
                        return {
                            question: item.title || item.question, // å…¼å®¹å…©ç¨®éµå
                            options: optionsText.trim(),
                            answer: `ç­”æ¡ˆï¼š${item.answer}. ${item.answerText}`
                        };
                    });
                }

                currentData = questionBanks[topicSelector.value];
                searchQuestions();
            } catch (error) {
                console.error("è¼‰å…¥é¡Œåº«æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼š", error);
                resultsContainer.innerHTML = `<p class="text-center text-red-500 italic">è¼‰å…¥é¡Œåº«å¤±æ•—ï¼š${error.message}ã€‚</p>`;
            }
        }

        loadQuestionBanks();

        topicSelector.addEventListener('change', () => {
            currentData = questionBanks[topicSelector.value];
            searchQuestions();
        });

        searchInput.addEventListener('input', searchQuestions);
        
        pasteBtn.addEventListener('click', async () => {
          try {
              const text = await navigator.clipboard.readText();
              searchInput.value = text;
              searchQuestions(); // è²¼ä¸Šå¾Œè‡ªå‹•è§¸ç™¼æœå°‹
              pasteBtn.textContent = 'å·²è²¼ä¸Šï¼';
              setTimeout(() => {
                  pasteBtn.textContent = 'æ¸…é™¤ä¸¦è²¼ä¸Š';
              }, 2000);
          } catch (err) {
              console.error('ç„¡æ³•è®€å–å‰ªè²¼ç°¿:', err);
              pasteBtn.textContent = 'ç„¡æ³•è²¼ä¸Šï¼';
              setTimeout(() => {
                  pasteBtn.textContent = 'æ¸…é™¤ä¸¦è²¼ä¸Š';
              }, 2000);
          }
      });

        function searchQuestions() {
            if (!currentData) {
                return;
            }

            const query = searchInput.value.trim().toLowerCase();
            resultsContainer.innerHTML = '';

            if (query === '') {
                resultsContainer.innerHTML = '<p class="text-center text-gray-500 italic">è«‹è¼¸å…¥é—œéµå­—ä¾†é–‹å§‹æœå°‹ã€‚</p>';
                return;
            }

            const results = currentData.filter(item =>
                item.question.toLowerCase().includes(query) || item.answer.toLowerCase().includes(query)
            );

            if (results.length === 0) {
                resultsContainer.innerHTML = '<p class="text-center text-gray-500 italic">æ‰¾ä¸åˆ°èˆ‡é—œéµå­—ç›¸ç¬¦çš„é¡Œç›®ã€‚</p>';
            } else {
                results.forEach(item => {
                    const resultCard = document.createElement('div');
                    resultCard.className = 'bg-white p-6 rounded-2xl shadow-md border border-gray-200 transition-transform transform hover:scale-[1.01]';
                    resultCard.innerHTML = `
                        <h2 class="text-xl font-bold text-blue-600 mb-2">Qï¼š${item.question.replace(/\n/g, '<br>')}</h2>
                        <div class="text-gray-700 leading-relaxed whitespace-pre-wrap mb-4">${item.options}</div>
                        <p class="text-gray-700 leading-relaxed answer-text text-red-500" style="font-size: 1.5rem;">${item.answer}</p>
                    `;
                    resultsContainer.appendChild(resultCard);
                });
            }
        }
    });
</script>

</body>
</html>
